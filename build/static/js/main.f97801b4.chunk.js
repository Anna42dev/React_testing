(this["webpackJsonpcmn-admin1"]=this["webpackJsonpcmn-admin1"]||[]).push([[0],{101:function(e,t,a){},102:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(18),c=a.n(o),l=a(9),s=a(10),i=a(13),u=a(12),m=a(11),d=a(20),p=a(25),h=a(7),b=a(33),E=a(21),f=a(24),g=a.n(f),v={navCollapsed:!1,width:window.innerWidth,isLoader:!1,user:g.a.get("user"),settings:g.a.get("settings")||{allowInviteOnly:!1}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"show_loader":return Object(E.a)(Object(E.a)({},e),{},{isLoader:t.payload});case"toggle_collapsed_nav":return Object(E.a)(Object(E.a)({},e),{},{navCollapsed:t.payload});case"window_width":return Object(E.a)(Object(E.a)({},e),{},{width:t.payload});case"set_settings":return Object(E.a)(Object(E.a)({},e),{},{setting:t.payload});case"update_user":return g.a.set("user",t.payload),Object(E.a)(Object(E.a)({},e),{},{user:t.payload});default:return e}};a(75),a(76);var _=a(50),y=a(53),C=a(54),O=a(1),j=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){h.b.success("Wow so easy !")}},{key:"render",value:function(){return r.a.createElement("div",{id:"dashboard",className:"p-4"},r.a.createElement("div",{className:"container-fluid"},"dashbaord"))}}]),a}(n.Component),k=Object(p.g)(Object(m.b)((function(e){return{user:e.user}}),{})(j)),S=a(6),L=(a(28),a(26)),N=a(8),A=a.n(N),T=a(4),D=a.n(T),R=a(15),U="".concat(window.location.protocol,"//").concat(window.location.hostname)+(window.location.port?":"+window.location.port:"")+"/api",I={SIGNIN_URL:"".concat(U,"/auth/login"),CHANGE_PASSWORD_URL:"".concat(U,"/auth/changepass"),ACCOUNT_LIST_URL:"".concat(U,"/account"),ACCOUNT_ADD_URL:"".concat(U,"/account/add"),ACCOUNT_REMOVE_URL:"".concat(U,"/account/delete"),ACCOUNT_SET_BALANCE_URL:"".concat(U,"/account/balance"),TERMINAL_LIST_URL:"".concat(U,"/terminal"),TERMINAL_ADD_URL:"".concat(U,"/terminal/add"),TERMINAL_UPDATE_URL:"".concat(U,"/terminal/update"),TERMINAL_REMOVE_URL:"".concat(U,"/terminal/delete"),REPORT_LIST_URL:"".concat(U,"/report")},x=function(){var e=Object(R.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post("".concat(I.ACCOUNT_LIST_URL),t).then((function(e){return e.data})).catch((function(e){throw e.response}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(R.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post("".concat(I.ACCOUNT_ADD_URL),t).then((function(e){return e.data})).catch((function(e){throw e.response}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(R.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post("".concat(I.ACCOUNT_REMOVE_URL),t).then((function(e){return e.data})).catch((function(e){throw e.response}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(R.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post("".concat(I.ACCOUNT_SET_BALANCE_URL),t).then((function(e){return e.data})).catch((function(e){throw e.response}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(R.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post("".concat(I.TERMINAL_LIST_URL),t).then((function(e){return e.data})).catch((function(e){throw e.response}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(R.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post("".concat(I.TERMINAL_ADD_URL),t).then((function(e){return e.data})).catch((function(e){throw e.response}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(R.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post("".concat(I.TERMINAL_UPDATE_URL),t).then((function(e){return e.data})).catch((function(e){throw e.response}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(R.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post("".concat(I.TERMINAL_REMOVE_URL),t).then((function(e){return e.data})).catch((function(e){throw e.response}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(R.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post("".concat(I.REPORT_LIST_URL),t).then((function(e){return e.data})).catch((function(e){throw e.response}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();A.a.interceptors.response.use((function(e){return e}),(function(e){return e.response?(404===e.response.status&&g.a.clearAll(),Promise.reject(e)):Promise.reject({response:{data:{code:320,message:"Network connection lost"}}})}));var W=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={bLoading:!1,bUpdateLoading:!1,accounts:[],show_new_account:!1,show_set_balance:!1,single_delete_modal_open:!1},n.getAccountList=n.getAccountList.bind(Object(S.a)(n)),n.addNewAccount=n.addNewAccount.bind(Object(S.a)(n)),n.deleteAccount=n.deleteAccount.bind(Object(S.a)(n)),n.setBalanceAccount=n.setBalanceAccount.bind(Object(S.a)(n)),n.setBalance=n.setBalance.bind(Object(S.a)(n)),n.onCloseNewAccountModal=n.onCloseNewAccountModal.bind(Object(S.a)(n)),n.onCloseBalanceModal=n.onCloseBalanceModal.bind(Object(S.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getAccountList()}},{key:"getAccountList",value:function(){var e=this;this.setState({bLoading:!0}),x({token:this.props.user.token}).then((function(t){e.setState({bLoading:!1,accounts:t}),console.log(t)})).catch((function(t){switch(e.setState({bLoading:!1}),t.status){case 500:e.setState({resetError:"Internal server error",emailError:""})}}))}},{key:"addNewAccount",value:function(e){var t=this;e.preventDefault();var a=this.state.username;this.setState({bUpdateLoading:!0}),M({token:this.props.user.token,username:a}).then((function(e){t.setState({bUpdateLoading:!1,show_new_account:!1,accounts:e}),console.log(e)})).catch((function(e){switch(t.setState({bUpdateLoading:!1}),e.status){case 500:t.setState({resetError:"Internal server error",emailError:""})}}))}},{key:"singleDelete",value:function(){var e=this;this.setState({bUpdateLoading:!0}),P({token:this.props.user.token,id:this.selectedAccount._id}).then((function(t){h.b.success("Accunt was removed."),e.setState({bUpdateLoading:!1,single_delete_modal_open:!1,accounts:t})})).catch((function(t){switch(e.setState({bUpdateLoading:!1}),t.status){case 403:h.b.error("Invalid parameters, account id not present.");break;case 500:h.b.error("Internal server error")}}))}},{key:"setBalance",value:function(e){var t=this;e.preventDefault();var a=this.state.balance;this.setState({bUpdateLoading:!0}),B({token:this.props.user.token,id:this.selectedAccount._id,balance:a}).then((function(e){h.b.success("Balance was set."),t.setState({bUpdateLoading:!1,show_set_balance:!1,accounts:e})})).catch((function(e){switch(t.setState({bUpdateLoading:!1}),e.status){case 403:h.b.error("Invalid parameters, account id not present.");break;case 500:h.b.error("Internal server error")}}))}},{key:"deleteAccount",value:function(e){this.selectedAccount=e,this.setState({single_delete_modal_open:!0})}},{key:"setBalanceAccount",value:function(e){this.selectedAccount=e,this.setState({show_set_balance:!0})}},{key:"onCloseNewAccountModal",value:function(){this.setState({show_new_account:!1})}},{key:"onCloseSingleDeleteModal",value:function(){this.setState({single_delete_modal_open:!1})}},{key:"onCloseBalanceModal",value:function(){this.setState({show_set_balance:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.bLoading,n=t.bUpdateLoading,o=t.accounts,c=t.show_new_account,l=t.show_set_balance,s=t.single_delete_modal_open,i=r.a.createElement(r.a.Fragment,null,r.a.createElement(O.b,{icon:"plus",color:"primary",onClick:function(){return e.setState({show_new_account:!0})}},"New Account"));return r.a.createElement("div",{className:"page signin"},r.a.createElement(O.g.Header,{title:"Accounts",options:i}),r.a.createElement(O.c,null,r.a.createElement(O.c.Body,null,r.a.createElement(O.j,{responsive:!0,highlightRowOnHover:!0,hasOutline:!0,verticalAlign:"center",cards:!0,className:"text-nowrap"},r.a.createElement(O.j.Header,null,r.a.createElement(O.j.Row,null,r.a.createElement(O.j.ColHeader,null,"Account ID"),r.a.createElement(O.j.ColHeader,null,"Account Name"),r.a.createElement(O.j.ColHeader,null,"Balance"),r.a.createElement(O.j.ColHeader,null,"Actions"))),r.a.createElement(O.j.Body,null,o.map((function(t,a){return r.a.createElement(O.j.Row,{key:a},r.a.createElement(O.j.Col,null,t._id),r.a.createElement(O.j.Col,null,t.username),r.a.createElement(O.j.Col,null,t.balance),r.a.createElement(O.j.Col,null,r.a.createElement(O.b.List,null,r.a.createElement(O.b,{size:"sm",color:"secondary",onClick:function(){return e.setBalanceAccount(t)}},"Set Balance"),r.a.createElement(O.b,{color:"danger",size:"sm",icon:"trash-2",onClick:function(){return e.deleteAccount(t)}}))))})),0===o.length&&!a&&r.a.createElement(O.j.Row,null,r.a.createElement(O.j.Col,{colSpan:"4",alignContent:"center"},r.a.createElement(O.d.Label,null,"No Accounts"))))))),r.a.createElement(L.a,{open:s,onClose:this.onCloseSingleDeleteModal.bind(this),little:!0,showCloseIcon:!1,closeOnEsc:!1,closeOnOverlayClick:!1},r.a.createElement("h2",null,"Confirmation"),r.a.createElement("p",null,"Are you sure to delete this account? This action can't be undone."),r.a.createElement(O.b.List,{align:"right"},r.a.createElement(O.b,{color:"secondary",onClick:this.onCloseSingleDeleteModal.bind(this),disabled:n},"Cancel"),r.a.createElement(O.b,{color:"primary",onClick:this.singleDelete.bind(this),loading:n},"Yes, delete"))),r.a.createElement(L.a,{open:c,onClose:this.onCloseNewAccountModal.bind(this),little:!0,showCloseIcon:!1,closeOnEsc:!1,closeOnOverlayClick:!1},r.a.createElement("h2",null,"Add New Account"),r.a.createElement("p",null,"Please input account's username and click 'Submit'. ",r.a.createElement("br",null),"Initially account's balance will be 0."),r.a.createElement(O.d,{onSubmit:this.addNewAccount},r.a.createElement(O.d.Group,null,r.a.createElement(O.d.Label,null,"User Name"),r.a.createElement(O.d.Input,{type:"text",required:!0,onChange:function(t){return e.setState({username:t.target.value})}})),r.a.createElement(O.b.List,{align:"right"},r.a.createElement(O.b,{type:"button",color:"secondary",disabled:n,onClick:this.onCloseNewAccountModal.bind(this)},"Cancel"),r.a.createElement(O.b,{color:"primary",loading:n},"Submit")))),r.a.createElement(L.a,{open:l,onClose:this.onCloseBalanceModal.bind(this),little:!0,showCloseIcon:!1,closeOnEsc:!1,closeOnOverlayClick:!1},r.a.createElement("h2",null,"Set Balance"),r.a.createElement("p",null,"Please input account balance and click 'Save'."),r.a.createElement(O.d,{onSubmit:this.setBalance},r.a.createElement(O.d.Group,null,r.a.createElement(O.d.Label,null,"Balance"),r.a.createElement(O.d.Input,{type:"number",min:"0",required:!0,onChange:function(t){return e.setState({balance:t.target.value})}})),r.a.createElement(O.b.List,{align:"right"},r.a.createElement(O.b,{type:"button",color:"secondary",disabled:n,onClick:this.onCloseBalanceModal.bind(this)},"Cancel"),r.a.createElement(O.b,{color:"primary",loading:n},"Save")))))}}]),a}(r.a.Component),J=Object(m.b)((function(e){return{user:e.user}}),{})(W),V=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).getTerminalList=function(){n.setState({bLoading:!0}),F({token:n.props.user.token}).then((function(e){n.setState({bLoading:!1,terminals:e})})).catch((function(e){switch(n.setState({bLoading:!1}),e.status){case 500:n.setState({resetError:"Internal server error",emailError:""})}}))},n.addNewTerminal=function(e){e.preventDefault();var t=n.state,a=t.vm_id,r=t.name;n.setState({bUpdateLoading:!0}),H({token:n.props.user.token,vm_id:a,name:r}).then((function(e){h.b.success("Terminal was added successfully."),n.setState({bUpdateLoading:!1,show_new_terminal:!1,terminals:e})})).catch((function(e){switch(n.setState({bUpdateLoading:!1}),e.status){case 400:h.b.error("Terminal id is already in use.");break;case 500:h.b.error("Internal server error")}}))},n.updateTerminal=function(e){e.preventDefault();var t=n.state.edit_name;n.setState({bUpdateLoading:!0}),Y({token:n.props.user.token,name:t,terminal_id:n.selectedTerminal._id}).then((function(e){h.b.success("Terminal was updated successfully."),n.setState({bUpdateLoading:!1,show_edit_terminal:!1,terminals:e})})).catch((function(e){switch(n.setState({bUpdateLoading:!1}),e.status){case 403:h.b.error("Invalid parameters, terminal id not present.");break;case 500:h.b.error("Internal server error")}}))},n.singleDelete=function(){n.setState({bUpdateLoading:!0}),G({token:n.props.user.token,id:n.selectedTerminal._id}).then((function(e){h.b.success("Terminal was removed."),n.setState({bUpdateLoading:!1,single_delete_modal_open:!1,terminals:e})})).catch((function(e){switch(n.setState({bUpdateLoading:!1}),e.status){case 403:h.b.error("Invalid parameters, terminal id not present.");break;case 500:h.b.error("Internal server error")}}))},n.deleteTerminal=function(e){n.selectedTerminal=e,n.setState({single_delete_modal_open:!0})},n.editTerminal=function(e){n.selectedTerminal=e,n.setState({edit_name:e.name,edit_vmid:e.vm_id,show_edit_terminal:!0})},n.onCloseNewTerminalModal=function(){n.setState({show_new_terminal:!1})},n.onCloseEditTerminalModal=function(){n.setState({show_edit_terminal:!1})},n.onCloseSingleDeleteModal=function(){n.setState({single_delete_modal_open:!1})},n.state={bLoading:!1,bUpdateLoading:!1,terminals:[],vm_id:"",name:"",edit_name:"",show_new_terminal:!1,show_edit_terminal:!1,single_delete_modal_open:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getTerminalList()}},{key:"render",value:function(){var e=this,t=this.state,a=t.bLoading,n=t.bUpdateLoading,o=t.terminals,c=t.show_new_terminal,l=t.show_edit_terminal,s=t.single_delete_modal_open,i=t.edit_name,u=t.edit_vmid,m=r.a.createElement(r.a.Fragment,null,r.a.createElement(O.b,{icon:"plus",color:"primary",onClick:function(){return e.setState({show_new_terminal:!0})}},"New Terminal"));return r.a.createElement("div",{className:"page signin"},r.a.createElement(O.g.Header,{title:"Terminals",options:m}),r.a.createElement(O.c,null,r.a.createElement(O.c.Body,null,r.a.createElement(O.j,{responsive:!0,highlightRowOnHover:!0,hasOutline:!0,verticalAlign:"center",cards:!0,className:"text-nowrap"},r.a.createElement(O.j.Header,null,r.a.createElement(O.j.Row,null,r.a.createElement(O.j.ColHeader,null,"Terminal ID"),r.a.createElement(O.j.ColHeader,null,"Terminal Name"),r.a.createElement(O.j.ColHeader,null,"Actions"))),r.a.createElement(O.j.Body,null,o.map((function(t,a){return r.a.createElement(O.j.Row,{key:a},r.a.createElement(O.j.Col,null,t.vm_id),r.a.createElement(O.j.Col,null,t.name),r.a.createElement(O.j.Col,null,r.a.createElement(O.b.List,null,r.a.createElement(O.b,{color:"primary",size:"sm",icon:"edit",onClick:function(){return e.editTerminal(t)}}),r.a.createElement(O.b,{color:"danger",size:"sm",icon:"trash-2",onClick:function(){return e.deleteTerminal(t)}}))))})),0===o.length&&!a&&r.a.createElement(O.j.Row,null,r.a.createElement(O.j.Col,{colSpan:"4",alignContent:"center"},r.a.createElement(O.d.Label,null,"No Terminals"))))))),r.a.createElement(L.a,{open:s,onClose:this.onCloseSingleDeleteModal,little:!0,showCloseIcon:!1,closeOnEsc:!1,closeOnOverlayClick:!1},r.a.createElement("h2",null,"Confirmation"),r.a.createElement("p",null,"Are you sure to delete this terminal? This action can't be undone."),r.a.createElement(O.b.List,{align:"right"},r.a.createElement(O.b,{color:"secondary",onClick:this.onCloseSingleDeleteModal,disabled:n},"Cancel"),r.a.createElement(O.b,{color:"primary",onClick:this.singleDelete,loading:n},"Yes, delete"))),r.a.createElement(L.a,{open:l,onClose:this.onCloseEditTerminalModal,little:!0,showCloseIcon:!1,closeOnEsc:!1,closeOnOverlayClick:!1},r.a.createElement("h2",null,"Update Terminal"),r.a.createElement("p",null,"Please input terminal id, terminal name and click 'Submit'. ",r.a.createElement("br",null)),r.a.createElement(O.d,{onSubmit:this.updateTerminal},r.a.createElement(O.d.Group,null,r.a.createElement(O.d.Label,null,"Terminal ID"),r.a.createElement(O.d.Input,{type:"text",readOnly:!0,value:u,required:!0,onChange:function(t){return e.setState({vm_id:t.target.value})}})),r.a.createElement(O.d.Group,null,r.a.createElement(O.d.Label,null,"Terminal Name"),r.a.createElement(O.d.Input,{type:"text",value:i,required:!0,onChange:function(t){return e.setState({edit_name:t.target.value})}})),r.a.createElement(O.b.List,{align:"right"},r.a.createElement(O.b,{type:"button",color:"secondary",disabled:n,onClick:this.onCloseEditTerminalModal},"Cancel"),r.a.createElement(O.b,{color:"primary",loading:n},"Submit")))),r.a.createElement(L.a,{open:c,onClose:this.onCloseNewTerminalModal,little:!0,showCloseIcon:!1,closeOnEsc:!1,closeOnOverlayClick:!1},r.a.createElement("h2",null,"Add New Terminal"),r.a.createElement("p",null,"Please input terminal id, terminal name and click 'Submit'. ",r.a.createElement("br",null)),r.a.createElement(O.d,{onSubmit:this.addNewTerminal},r.a.createElement(O.d.Group,null,r.a.createElement(O.d.Label,null,"Terminal ID"),r.a.createElement(O.d.Input,{type:"text",required:!0,onChange:function(t){return e.setState({vm_id:t.target.value})}})),r.a.createElement(O.d.Group,null,r.a.createElement(O.d.Label,null,"Terminal Name"),r.a.createElement(O.d.Input,{type:"text",required:!0,onChange:function(t){return e.setState({name:t.target.value})}})),r.a.createElement(O.b.List,{align:"right"},r.a.createElement(O.b,{type:"button",color:"secondary",disabled:n,onClick:this.onCloseNewTerminalModal},"Cancel"),r.a.createElement(O.b,{color:"primary",loading:n},"Submit")))))}}]),a}(r.a.Component),z=Object(m.b)((function(e){return{user:e.user}}),{})(V),$=a(30),K=a.n($),Q=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={records:[],accounts:[],account:"",from_date:"",to_date:""},n.getReports=n.getReports.bind(Object(S.a)(n)),n.getAccountList=n.getAccountList.bind(Object(S.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getReports(),this.getAccountList()}},{key:"getReports",value:function(){var e=this;q({token:this.props.user.token}).then((function(t){e.setState({records:t}),e.state.from_date&&e.state.to_date||(t.length>0?e.setState({from_date:new Date(t[t.length-1].date),to_date:new Date(t[0].date)}):e.setState({from_date:new Date,to_date:new Date}))})).catch((function(t){switch(t.status){case 500:e.setState({resetError:"Internal server error",emailError:""})}}))}},{key:"getAccountList",value:function(){var e=this;x({token:this.props.user.token}).then((function(t){e.setState({accounts:t})})).catch((function(t){switch(t.status){case 500:e.setState({resetError:"Internal server error",emailError:""})}}))}},{key:"searchReport",value:function(){var e=this,t=this.state,a=t.account,n=t.from_date,r=t.to_date,o=K()(n).format("YYYY-MM-DD")+" 00:00:00",c=K()(r).format("YYYY-MM-DD")+" 23:59:59";q({token:this.props.user.token,account:a,from_date:o,to_date:c}).then((function(t){e.setState({records:t})})).catch((function(t){switch(t.status){case 500:e.setState({resetError:"Internal server error",emailError:""})}}))}},{key:"downloadCSV",value:function(){var e=this.state,t=e.account,a=e.from_date,n=e.to_date,r=K()(a).format("YYYY-MM-DD")+" 00:00:00",o=K()(n).format("YYYY-MM-DD")+" 23:59:59";document.getElementById("export_account").value=t,document.getElementById("export_from_date").value=r,document.getElementById("export_to_date").value=o,document.getElementById("export-form").submit()}},{key:"chooseFromDate",value:function(e){this.setState({from_date:e})}},{key:"chooseToDate",value:function(e){this.setState({to_date:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.records,n=t.accounts,o=t.from_date,c=t.to_date;return console.log(o),r.a.createElement("div",{className:"page signin"},r.a.createElement(O.g.Header,{title:"Reports"}),r.a.createElement(O.c,null,r.a.createElement(O.c.Body,null,o&&r.a.createElement(O.f.Row,null,r.a.createElement("div",{class:"col-xs-12 col-sm-12 col-md-4 col-lg-4 col-xl-4"},r.a.createElement(O.d.Group,{label:"Account"},r.a.createElement(O.d.Select,{onChange:function(t){return e.setState({account:t.target.value})}},r.a.createElement("option",{value:""},"All Accounts"),n.map((function(e,t){return r.a.createElement("option",{key:t,value:e._id},e.username)}))))),r.a.createElement("div",{class:"col-xs-12 col-sm-12 col-md-4 col-lg-4 col-xl-4"},r.a.createElement(O.d.Group,{label:"From"},r.a.createElement(O.d.DatePicker,{defaultDate:o||new Date,format:"mm/dd/yyyy",maxYear:2100,minYear:2020,monthLabels:["January","February","March","April","May","June","July","August","September","October","November","December"],onChange:this.chooseFromDate.bind(this)}))),r.a.createElement("div",{class:"col-xs-12 col-sm-12 col-md-4 col-lg-4 col-xl-4"},r.a.createElement(O.d.Group,{label:"To"},r.a.createElement(O.d.DatePicker,{defaultDate:c||new Date,format:"mm/dd/yyyy",maxYear:2100,minYear:2020,monthLabels:["January","February","March","April","May","June","July","August","September","October","November","December"],onChange:this.chooseToDate.bind(this)})))),o&&r.a.createElement(O.f.Row,null,r.a.createElement(O.f.Col,null,r.a.createElement(O.b.List,{align:"right"},r.a.createElement(O.b,{color:"primary",icon:"search",onClick:this.searchReport.bind(this)},"Search"),r.a.createElement(O.b,{color:"primary",icon:"download",onClick:this.downloadCSV.bind(this)},"Download CSV")))),r.a.createElement(O.f.Row,null,r.a.createElement(O.j,{responsive:!0,highlightRowOnHover:!0,hasOutline:!0,verticalAlign:"center",cards:!0,className:"text-nowrap"},r.a.createElement(O.j.Header,null,r.a.createElement(O.j.Row,null,r.a.createElement(O.j.ColHeader,null,"Account ID"),r.a.createElement(O.j.ColHeader,null,"Account Name"),r.a.createElement(O.j.ColHeader,null,"Terminal ID"),r.a.createElement(O.j.ColHeader,null,"Pay Amount"),r.a.createElement(O.j.ColHeader,null,"Pay Date"))),r.a.createElement(O.j.Body,null,a.map((function(e,t){return r.a.createElement(O.j.Row,{key:t},r.a.createElement(O.j.Col,null,e.account&&e.account._id),r.a.createElement(O.j.Col,null,e.account&&e.account.username),r.a.createElement(O.j.Col,null,e.vm_id),r.a.createElement(O.j.Col,null,e.amount),r.a.createElement(O.j.Col,null,K()(e.date).format("YYYY-MM-DD HH:mm:ss")))})),0===a.length&&r.a.createElement(O.j.Row,null,r.a.createElement(O.j.Col,{colSpan:"4",alignContent:"center"},r.a.createElement(O.d.Label,null,"No Reports")))))))),r.a.createElement("form",{method:"post",id:"export-form",action:U+"/report/export",style:{display:"none"}},r.a.createElement("input",{type:"text",id:"export_account",name:"account"}),r.a.createElement("input",{type:"text",id:"export_from_date",name:"from_date"}),r.a.createElement("input",{type:"text",id:"export_to_date",name:"to_date"}),r.a.createElement("input",{type:"text",name:"token",value:this.props.user.token})))}}]),a}(r.a.Component),X=Object(m.b)((function(e){return{user:e.user}}),{})(Q),Z=function(){var e=Object(R.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post("".concat(I.SIGNIN_URL),t).then((function(e){return e.data})).catch((function(e){throw e.response}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(R.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post("".concat(I.CHANGE_PASSWORD_URL),t).then((function(e){return e.data})).catch((function(e){throw e.response}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(R.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post("".concat(I.SIGNUP_URL),t).then((function(e){return e.data})).catch((function(e){throw e.response}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(R.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post("".concat(I.ACCOUNT_PASSWORD_RESTE_URL),t).then((function(e){return e.data})).catch((function(e){throw e.response}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={bUpdating:!1},n.changePassword=n.changePassword.bind(Object(S.a)(n)),n}return Object(s.a)(a,[{key:"changePassword",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.password,r=a.new_password;r===a.confirm_password&&(this.setState({bUpdating:!0}),ee({token:this.props.user.token,password:n,new_password:r}).then((function(e){t.setState({bUpdating:!1}),h.b.success("Changed password successfully.")})).catch((function(e){switch(t.setState({bUpdating:!1}),e.status){case 403:h.b.error("Invalid passsword!");break;case 500:t.setState({resetError:"Internal server error",emailError:""})}})))}},{key:"render",value:function(){var e=this,t=this.state,a=t.bUpdating,n=t.new_password,o=t.confirm_password;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"page-header"},r.a.createElement("h1",{className:"page-title"},"Change Password")),r.a.createElement("div",{className:"col-sm-6 col-12 ml-auto mx-auto"},r.a.createElement(O.c,null,r.a.createElement(O.c.Body,null,r.a.createElement(O.d,{onSubmit:this.changePassword},r.a.createElement(O.d.Group,null,r.a.createElement(O.d.Label,null,"Current Password"),r.a.createElement(O.d.Input,{type:"password",required:!0,onChange:function(t){return e.setState({password:t.target.value})}})),r.a.createElement(O.d.Group,null,r.a.createElement(O.d.Label,null,"New Password"),r.a.createElement(O.d.Input,{type:"password",required:!0,onChange:function(t){return e.setState({new_password:t.target.value})}})),r.a.createElement(O.d.Group,null,r.a.createElement(O.d.Label,null,"Confirm Password"),r.a.createElement(O.d.Input,{type:"password",required:!0,error:n!==o,onChange:function(t){return e.setState({confirm_password:t.target.value})}})),r.a.createElement(O.d.Footer,null,r.a.createElement(O.b,{color:"primary",icon:"save",loading:a,block:!0},"Change Password")))))))}}]),a}(r.a.Component),re=Object(m.b)((function(e){return{user:e.user}}),{})(ne);var oe=function(e){return{avatarURL:"/uploads/"+e.photo,name:"".concat(e.user.username),description:"".concat(e.user.email),options:[{icon:"lock",value:"Change Password",onClick:function(){window.location.href="/changepass"}},{isDivider:!0},{icon:"log-out",value:"Sign out",onClick:function(){g.a.clearAll(),window.location.href="/signin"}}]}},ce=[{value:"Accounts",to:"/accounts",icon:"users",LinkComponent:Object(p.g)(d.b)},{value:"Terminals",to:"/terminals",icon:"hard-drive",LinkComponent:Object(p.g)(d.b)},{value:"Reports",to:"/reports",icon:"file",LinkComponent:Object(p.g)(d.b)}],le=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={showMsg:!1},n}return Object(s.a)(a,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this.props.user;return console.log("user",e),r.a.createElement(O.i.Wrapper,{headerProps:{href:"/",alt:"Loop",imageURL:"/authback.png",accountDropdown:oe(e)},navProps:{itemsObjects:ce},routerContextComponentType:Object(p.g)(O.h)},r.a.createElement(O.g.Content,null,r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/dashboard",component:k}),r.a.createElement(p.b,{path:"/accounts",component:J}),r.a.createElement(p.b,{path:"/terminals",component:z}),r.a.createElement(p.b,{path:"/reports",component:X}),r.a.createElement(p.b,{path:"/changepass",component:re}))))}}]),a}(r.a.Component),se=Object(p.g)(Object(m.b)((function(e){return{isLoader:e.isLoader,user:e.user}}),{})(le)),ie=a(23),ue=(a(101),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).updateForm=function(e){n.setState(Object(ie.a)({},e.target.name,e.target.value))},n.state={bLoading:!1},n.handleLogin=n.handleLogin.bind(Object(S.a)(n)),n.updateForm=n.updateForm.bind(Object(S.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){}},{key:"handleLogin",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.username,r=a.email,o=a.password;this.setState({bLoading:!0}),te({username:n,email:r,password:o}).then((function(e){t.setState({bLoading:!1,signupSuccess:!0,usernameError:"",emailError:"",signupError:""})})).catch((function(e){switch(console.log(e),e.status){case 400:t.setState({usernameError:"",emailError:"E-mail already registered"});break;case 401:t.setState({usernameError:"Username already registered",emailError:""});break;case 500:t.setState({signupError:"Internal server error"})}t.setState({bLoading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.bLoading,a=e.usernameError,n=e.emailError,o=e.signupError,c=e.signupSuccess;return r.a.createElement("div",{className:"page signup"},r.a.createElement("div",{className:"page-single"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col col-login mx-auto"},r.a.createElement("div",{className:"text-center mb-6"},r.a.createElement("img",{src:"authback.png",className:"h-6",alt:"Health Tree Logo"})),r.a.createElement(O.d,{className:"card",onSubmit:this.handleLogin,method:"POST"},r.a.createElement(O.c.Body,{className:"p-6"},o&&r.a.createElement(O.a,{type:"danger"},o),c&&r.a.createElement(O.a,{type:"success"},"Account was created. Please verify account through E-mail."),r.a.createElement(O.c.Title,{RootComponent:"div"},"Create New Account"),r.a.createElement(O.e,{name:"username",label:"Username",placeholder:"Enter username",onChange:this.updateForm,error:a,required:!0}),r.a.createElement(O.e,{name:"email",label:"Email",type:"email",placeholder:"Enter email",onChange:this.updateForm,error:n,required:!0}),r.a.createElement(O.e,{name:"password",type:"password",label:"Password",placeholder:"Password",onChange:this.updateForm,required:!0}),r.a.createElement(O.d.Footer,null,r.a.createElement(O.b,{type:"submit",color:"primary",loading:t,block:!0},"Create Account")),r.a.createElement("div",{className:"login_link"},"Already have an account? ",r.a.createElement("a",{href:"/signin",className:"link"},"Sign In")))))))))}}]),a}(r.a.Component)),me=Object(m.b)((function(e){return{user:e.user}}),{})(ue),de=(a(102),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).updateForm=function(e){n.setState(Object(ie.a)({},e.target.name,e.target.value))},n.state={bLoading:!1,loginError:"",passwordError:""},n.handleLogin=n.handleLogin.bind(Object(S.a)(n)),n.updateForm=n.updateForm.bind(Object(S.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){}},{key:"handleLogin",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.email,r=a.password;console.log(n,r),this.setState({bLoading:!0}),Z({email:n,password:r}).then((function(e){t.setState({bLoading:!1}),t.props.updateUser(e),t.props.history.push("/accounts")})).catch((function(e){switch(console.log(e),t.setState({bLoading:!1}),e.status){case 403:t.setState({loginError:"",passwordError:"Invalid username/password"});break;case 500:t.setState({loginError:"Internal server error",passwordError:""})}}))}},{key:"render",value:function(){var e=this.state,t=e.bLoading,a=e.loginError,n=e.passwordError;return r.a.createElement("div",{className:"page signin"},r.a.createElement("div",{className:"page-single"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col col-login mx-auto"},r.a.createElement("div",{className:"text-center mb-6"},r.a.createElement("img",{src:"authback.png",className:"h-6",alt:"Health Tree Logo"})),r.a.createElement(O.d,{className:"card",onSubmit:this.handleLogin,method:"POST"},r.a.createElement(O.c.Body,{className:"p-6"},a&&r.a.createElement(O.a,{type:"danger"},a),r.a.createElement(O.c.Title,{RootComponent:"div"},"Sign In to Admin Account"),r.a.createElement(O.e,{name:"email",label:"Email",type:"email",placeholder:"Enter email",onChange:this.updateForm,error:"",required:!0}),r.a.createElement(O.e,{name:"password",type:"password",label:"Password",placeholder:"Password",error:n,onChange:this.updateForm,required:!0}),r.a.createElement(O.d.Footer,null,r.a.createElement(O.b,{type:"submit",color:"primary",loading:t,block:!0},"Sign In")))))))))}}]),a}(r.a.Component)),pe=Object(m.b)((function(e){return{user:e.user}}),{updateUser:function(e){return{type:"update_user",payload:e}}})(de),he=(a(103),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).updateForm=function(e){n.setState(Object(ie.a)({},e.target.name,e.target.value))},n.state={},n.resetPass=n.resetPass.bind(Object(S.a)(n)),n.updateForm=n.updateForm.bind(Object(S.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){}},{key:"resetPass",value:function(e){var t=this;e.preventDefault();var a=this.state.email;this.setState({bLoading:!0}),ae({mail:a}).then((function(e){t.setState({bLoading:!1}),console.log(e)})).catch((function(e){switch(console.log(e),t.setState({bLoading:!1}),e.status){case 400:t.setState({emailError:"User with this e-mail doesn't exist",resetError:""});break;case 500:t.setState({resetError:"Internal server error",emailError:""})}}))}},{key:"componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){var e=this.state,t=e.bLoading,a=e.emailError,n=e.resetError;return r.a.createElement("div",{className:"page resetpass"},r.a.createElement("div",{className:"page-single"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col col-login mx-auto"},r.a.createElement("div",{className:"text-center mb-6"},r.a.createElement("img",{src:"authback.png",className:"h-6",alt:"Health Tree Logo"})),r.a.createElement(O.d,{className:"card",onSubmit:this.resetPass,method:"POST"},r.a.createElement(O.c.Body,{className:"p-6"},n&&r.a.createElement(O.a,{type:"danger"},n),r.a.createElement(O.c.Title,{RootComponent:"div"},"Forgot Password"),r.a.createElement("p",{className:"text-muted"},"Enter your email address and your password will be reset and emailed to you."),r.a.createElement(O.e,{name:"email",label:"Email Address",placeholder:"Enter email",onChange:this.updateForm,error:a,required:!0}),r.a.createElement(O.d.Footer,null,r.a.createElement(O.b,{type:"submit",color:"primary",loading:t,block:!0},"Request Password Change")),r.a.createElement("div",{className:"login_link"},"Already have an account? ",r.a.createElement("a",{href:"/signin",className:"link"},"Sign In")))))))))}}]),a}(n.Component)),be=Object(m.b)((function(e){return{user:e.user}}),{})(he),Ee=function(e){var t=e.component,a=e.user,n=Object(C.a)(e,["component","user"]);return r.a.createElement(p.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(p.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},fe=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/signup",component:me}),r.a.createElement(p.b,{path:"/signin",component:pe}),r.a.createElement(p.b,{path:"/forgotpass",component:be}),r.a.createElement(Ee,{path:"".concat(this.props.match.url),user:this.props.user,component:se}))}}]),a}(r.a.Component),ge=Object(m.b)((function(e){return{user:e.user}}),{})(fe);_.a.add(y.a);var ve,we=Object(b.b)(w,ve),_e=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(m.a,{store:we},r.a.createElement(d.a,null,r.a.createElement(p.b,{path:"/",component:ge})),r.a.createElement(h.a,null)))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(_e,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},56:function(e,t,a){e.exports=a(104)},76:function(e,t,a){}},[[56,1,2]]]);
//# sourceMappingURL=main.f97801b4.chunk.js.map